---
import Layout from '../../layouts/Layout.astro';
import ProgramStudiMenu from '../../components/prodi/ProgramStudiMenu.astro';
import ProgramStudiContent from '../../components/prodi/ProgramStudiContent.astro';
import { getCollection, getEntryBySlug } from 'astro:content';

export async function getStaticPaths() {
  const entries = await getCollection('program-studi');
  return entries.map(entry => ({
    params: { slug: entry.slug }
  }));
}

const { slug } = Astro.params;

const prodiData = await getEntryBySlug('program-studi', slug);
if (!prodiData) throw new Error(`Data tidak ditemukan untuk slug: ${slug}`);

const activeTab = 'profil';
const menuItems = prodiData.data.menu || []; // ✅ WAJIB ADA INI
---

<Layout>
  <ProgramStudiMenu activeTab={activeTab} menuItems={menuItems} /> <!-- ✅ DIKIRIM KE SINI -->
  <ProgramStudiContent activeTab={activeTab} prodiData={prodiData} />
</Layout>
